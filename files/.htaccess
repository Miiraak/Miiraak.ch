# .htaccess for Miiraak.ch - File Direct Access Configuration

# Enable directory listing (optional - remove if you don't want file browsing)
Options +Indexes

# Custom directory index styling (optional)
IndexOptions FancyIndexing HTMLTable VersionSort FoldersFirst NameWidth=* DescriptionWidth=*

# CORS Headers - Allow cross-origin requests (needed for IEX, curl, etc.)
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type"
</IfModule>

# MIME Types for common file types
<IfModule mod_mime.c>
    # PowerShell Scripts
    AddType text/plain .ps1
    AddType text/plain .psm1
    
    # Batch Files
    AddType text/plain .bat
    AddType text/plain .cmd
    
    # Shell Scripts
    AddType text/plain .sh
    
    # Config Files
    AddType text/xml .xml
    AddType text/plain .conf
    AddType text/plain .cfg
    
    # Text Files
    AddType text/plain .txt
    AddType text/plain .log
    
    # JSON
    AddType application/json .json
</IfModule>

# Security - Prevent access to sensitive files
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Allow downloading of executable files (be careful with this!)
<FilesMatch "\.(exe|msi|zip|7z|rar)$">
    ForceType application/octet-stream
    Header set Content-Disposition attachment
</FilesMatch>

# Cache Control for scripts (no cache for dynamic content)
<FilesMatch "\.(ps1|bat|sh|xml)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires 0
</FilesMatch>

# UTF-8 encoding
AddDefaultCharset UTF-8

# Disable ETags (optional, for privacy)
FileETag None

# Custom error pages (optional)
# ErrorDocument 404/404.html